(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{18:function(e,n,t){e.exports=t(41)},23:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(15),u=t.n(c),o=(t(23),t(16)),i=t(17),l=t(2),m=function(e){var n=e.name,t=e.number,a=e.handleDelete;return r.a.createElement("div",null,n," ",t," ",r.a.createElement("button",{onClick:a},"delete"))},f=function(e){var n=e.persons,t=e.handleDelete;return r.a.createElement(r.a.Fragment,null,n.map((function(e){var n=e.name,a=e.number,c=e.id;return r.a.createElement(m,{key:n,name:n,number:a,handleDelete:function(){return t(c)}})})))},s=function(e){var n=e.filter,t=e.handleChange;return r.a.createElement("div",null,"filter shown with: ",r.a.createElement("input",{value:n,onChange:t}))},d=function(e){var n=e.handleSubmit,t=Object(a.useState)(""),c=Object(l.a)(t,2),u=c[0],o=c[1],i=Object(a.useState)(""),m=Object(l.a)(i,2),f=m[0],s=m[1];return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),o(""),s(""),n(u,f)}},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:u,onChange:function(e){return o(e.target.value)}})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:f,onChange:function(e){return s(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},h=function(e){var n=e.notification,t=n.status,a=n.message;return t?r.a.createElement("div",{className:"notification ".concat(t)},a):null},b=t(4),v=t.n(b),E="api/persons",p=function(){return v.a.get(E).then((function(e){return e.data}))},g=function(e){return v.a.post(E,e).then((function(e){return e.data}))},j=function(e){return v.a.delete("".concat(E,"/").concat(e)).then((function(){return"success"}))},w=function(e){return v.a.put("".concat(E,"/").concat(e.id),e).then((function(e){return e.data}))},O=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],c=n[1],u=Object(a.useState)(""),m=Object(l.a)(u,2),b=m[0],v=m[1],E=Object(a.useState)({}),O=Object(l.a)(E,2),C=O[0],S=O[1];Object(a.useEffect)((function(){p().then((function(e){return c(e)}))}),[]);var k=function(e,n){S({status:e,message:n}),setTimeout((function(){S({})}),1e3)};return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(h,{notification:C}),r.a.createElement(s,{filter:b,handleChange:function(e){return v(e.target.value)}}),r.a.createElement("h2",null,"add a new"),r.a.createElement(d,{handleSubmit:function(e,n){var a=t.find((function(n){return n.name===e}));a?window.confirm("".concat(e," is already added to the database. Replace the old number with the new one?"))&&w(Object(i.a)({},a,{name:e,number:n})).then((function(n){c(t.map((function(e){return e.id===n.id?n:e}))),k("success","Updated ".concat(e))})).catch((function(){return k("error","Information of ".concat(e," has been already removed from the server"))})):g({name:e,number:n}).then((function(n){c([].concat(Object(o.a)(t),[n])),k("success","Added ".concat(e))}))}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(f,{persons:t.filter((function(e){return e.name.toLowerCase().includes(b.toLowerCase())})),handleDelete:function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Delete ".concat(n.name))&&j(e).then((function(n){"success"===n&&c(t.filter((function(n){return n.id!==e})))})).catch((function(){return k("error","".concat(n.name," does not exist on the server"))}))}}))};u.a.render(r.a.createElement(O,null),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.123cfe60.chunk.js.map